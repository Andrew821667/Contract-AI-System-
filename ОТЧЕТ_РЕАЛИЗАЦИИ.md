# –û—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–π –∞–Ω–∞–ª–∏–∑

## üéØ –¶–µ–ª—å
–ö–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ —Å–Ω–∏–∑–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—É—Ç—ë–º –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏–∑–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –±–∞—Ç—á–∏–Ω–≥–æ–º –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ **–£—Ä–æ–≤–µ–Ω—å 1 (–ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑)**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `gpt-4o-mini` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ, –¥–µ—à—ë–≤–æ–≥–æ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–≥–æ–≤–æ—Ä–∞
  - –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.15/$0.60 –∑–∞ 1–ú —Ç–æ–∫–µ–Ω–æ–≤ (–≤–≤–æ–¥/–≤—ã–≤–æ–¥)
  - –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤
  - **–í 66 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ** gpt-4-turbo

- ‚úÖ **–£—Ä–æ–≤–µ–Ω—å 2 (–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑)**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `gpt-4o` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É
  - –°—Ç–æ–∏–º–æ—Å—Ç—å: $2.50/$10.00 –∑–∞ 1–ú —Ç–æ–∫–µ–Ω–æ–≤
  - –í–∫–ª—é—á–∞–µ—Ç:
    - –°—É–¥–µ–±–Ω—ã–µ –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—ã —Å –Ω–æ–º–µ—Ä–∞–º–∏ –¥–µ–ª, —Å—É–¥–∞–º–∏, –¥–∞—Ç–∞–º–∏
    - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–∫–æ–Ω—ã (—Å—Ç–∞—Ç—å–∏ –ì–ö –†–§)
    - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ —Å –ø—Ä–∞–≤–æ–≤—ã–º –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º
    - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –∏ –ø–æ–∑–∏—Ü–∏—è –í–° –†–§
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç 1-3 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É–Ω–∫—Ç–∞ –¥–ª—è –≥–ª—É–±–æ–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏:**
```
–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (gpt-4-turbo –¥–ª—è –≤—Å–µ—Ö):  ~$0.30-0.50 –∑–∞ –¥–æ–≥–æ–≤–æ—Ä
–ü–æ—Å–ª–µ (gpt-4o-mini + –≤—ã–±–æ—Ä–æ—á–Ω–æ gpt-4o): ~$0.01-0.05 –∑–∞ –¥–æ–≥–æ–≤–æ—Ä
–≠–∫–æ–Ω–æ–º–∏—è: —Å–Ω–∏–∂–µ–Ω–∏–µ –≤ 10-50 —Ä–∞–∑!
```

### 2. –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (`config/settings.py:llm_batch_size`)
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç 5 –ø—É–Ω–∫—Ç–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∫ LLM –≤–º–µ—Å—Ç–æ 1 –ø—É–Ω–∫—Ç–∞ –∑–∞ –∑–∞–ø—Ä–æ—Å.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- System prompt –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è 1 —Ä–∞–∑ –Ω–∞ 5 –ø—É–Ω–∫—Ç–æ–≤ –≤–º–µ—Å—Ç–æ 5 —Ä–∞–∑
- –°–æ–∫—Ä–∞—â–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ API-–≤—ã–∑–æ–≤–æ–≤ –≤ 5 —Ä–∞–∑
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è 80%** –Ω–∞ —Ç–æ–∫–µ–Ω–∞—Ö system prompt

**–ü—Ä–∏–º–µ—Ä:**
```
20 –ø—É–Ω–∫—Ç–æ–≤ –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏: 20 API-–≤—ã–∑–æ–≤–æ–≤
20 –ø—É–Ω–∫—Ç–æ–≤ –ø–æ—Å–ª–µ: 4 API-–≤—ã–∑–æ–≤–∞ (5+5+5+5)
```

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ LLM
–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ SHA256 –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SQLite –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ API-–≤—ã–∑–æ–≤—ã.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ö–ª—é—á –∫—ç—à–∞: —Ö—ç—à (–ø—Ä–æ–≤–∞–π–¥–µ—Ä, –º–æ–¥–µ–ª—å, –ø—Ä–æ–º–ø—Ç, system_prompt, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, max_tokens, —Ñ–æ—Ä–º–∞—Ç)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø–∞–¥–∞–Ω–∏–π –∏ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –∫—ç—à
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** $0 –¥–ª—è –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –¢–∞–±–ª–∏—Ü–∞ `LLMCache` –≤ `src/models/database.py`
- –ú–µ—Ç–æ–¥—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `src/services/llm_gateway.py`
- –í–∫–ª—é—á–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `use_cache=True`

### 4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ USD –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- –í—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (–ø—Ä–æ–º–ø—Ç + system prompt)
- –í—ã—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (–æ—Ç–≤–µ—Ç LLM)
- –í—Å–µ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤
- –°—Ç–æ–∏–º–æ—Å—Ç—å –≤ USD (—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ –ø—Ä–∞–π—Å—É –º–æ–¥–µ–ª–∏)
- –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI (`app.py:395`):**
```
üí∞ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
üì• Input —Ç–æ–∫–µ–Ω–æ–≤: 1,234
üì§ Output —Ç–æ–∫–µ–Ω–æ–≤: 567
üíµ –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.0123
ü§ñ –ú–æ–¥–µ–ª—å: gpt-4o-mini
[–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π % –æ—Ç $0.10]
```

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ—Å—Ç–æ–≤—ã–º –∏ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–∞–º–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞—Ç—Ä–∞—Ç –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

**–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (`config/settings.py:llm_test_mode`):**
- –ú–∞–∫—Å. —Ç–æ–∫–µ–Ω–æ–≤: 800 (–ø—Ä–æ—Ç–∏–≤ –±–µ–∑–ª–∏–º–∏—Ç–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω)
- –ú–∞–∫—Å. –ø—É–Ω–∫—Ç–æ–≤: 10 (–ø—Ä–æ—Ç–∏–≤ –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω)
- –ú–æ–¥–µ–ª—å: gpt-4o-mini –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```python
llm_test_mode: bool = True
llm_quick_model: str = "gpt-4o-mini"
llm_deep_model: str = "gpt-4o"
llm_batch_size: int = 5
llm_test_max_tokens: int = 800
llm_test_max_clauses: int = 10
```

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤ UI
–î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "üî¨ –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ (–£—Ä–æ–≤–µ–Ω—å 2 - gpt-4o)" –≤ Streamlit-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –í–∏–¥–∂–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ 1-3 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤
- –ö–Ω–æ–ø–∫–∞ "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑"
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å:
  - –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (–æ—Ü–µ–Ω–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è, –∏—Å–ø–æ–ª–Ω–∏–º–æ—Å—Ç–∏)
  - –†–∏—Å–∫–∏ —Å –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–∞–º–∏ (–Ω–æ–º–µ—Ä–∞ –¥–µ–ª, —Å—É–¥—ã, –¥–∞—Ç—ã)
  - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ (2-3 —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–∏)
  - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `app.py:574-661`

### 7. –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞, –∫–æ–≥–¥–∞ LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤–º–µ—Å—Ç–æ JSON.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π system prompt, —Ç—Ä–µ–±—É—é—â–∏–π JSON –¥–∞–∂–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–ø—ã—Ç–∫–∞ –∏–∑–≤–ª–µ—á—å JSON –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ regex
- Fallback –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏ –æ—à–∏–±–∫–µ –±–∞—Ç—á–∞
- –ò–º–ø–æ—Ä—Ç `settings` –≤ `contract_analyzer_agent.py`

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```
‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤: –†–ê–ë–û–¢–ê–ï–¢
  - –î–æ: 0 —Ç–æ–∫–µ–Ω–æ–≤, $0.000000
  - –ü–æ—Å–ª–µ 1 –≤—ã–∑–æ–≤–∞: 34 —Ç–æ–∫–µ–Ω–∞, $0.000007
  - –ú–æ–¥–µ–ª—å: gpt-4o-mini

‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π: –†–ê–ë–û–¢–ê–ï–¢
  - –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º: True
  - –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å: gpt-4o-mini
  - –ì–ª—É–±–æ–∫–∞—è –º–æ–¥–µ–ª—å: gpt-4o
  - –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞: 5

‚úÖ –ú–µ—Ç–æ–¥ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞: –°–£–©–ï–°–¢–í–£–ï–¢
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: ['self', 'clause_ids', 'contract_id', 'xml_content', 'rag_context']

‚úÖ –ë–∞—Ç—á-–∞–Ω–∞–ª–∏–∑: –†–ê–ë–û–¢–ê–ï–¢
  - 3 –ø—É–Ω–∫—Ç–∞ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞ 1 –≤—ã–∑–æ–≤
  - 1,127 —Ç–æ–∫–µ–Ω–æ–≤, $0.000361
  - –í—Å–µ –ø—É–Ω–∫—Ç—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—Ü–µ–Ω–∫–∏
```

### –û—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏:
**–¢–∏–ø–∏—á–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä (20 –ø—É–Ω–∫—Ç–æ–≤):**

**–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –ú–æ–¥–µ–ª—å: gpt-4-turbo
- –í—ã–∑–æ–≤–æ–≤: 20 (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ –ø—É–Ω–∫—Ç)
- –¢–æ–∫–µ–Ω–æ–≤: ~400K –≤–≤–æ–¥ + 100K –≤—ã–≤–æ–¥
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$4.00-6.00 –∑–∞ –¥–æ–≥–æ–≤–æ—Ä

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –£—Ä–æ–≤–µ–Ω—å 1):**
- –ú–æ–¥–µ–ª—å: gpt-4o-mini
- –í—ã–∑–æ–≤–æ–≤: 4 (–±–∞—Ç—á–∏ –ø–æ 5)
- –¢–æ–∫–µ–Ω–æ–≤: ~100K –≤–≤–æ–¥ + 50K –≤—ã–≤–æ–¥
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.01-0.02 –∑–∞ –¥–æ–≥–æ–≤–æ—Ä
- **–≠–∫–æ–Ω–æ–º–∏—è: –≤ 200-600 —Ä–∞–∑!**

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–£—Ä–æ–≤–µ–Ω—å 1 + –£—Ä–æ–≤–µ–Ω—å 2 –Ω–∞ 3 –ø—É–Ω–∫—Ç–∞—Ö):**
- –£—Ä–æ–≤–µ–Ω—å 1: $0.01-0.02
- –£—Ä–æ–≤–µ–Ω—å 2 (3 –ø—É–Ω–∫—Ç–∞): $0.03-0.09
- –ò—Ç–æ–≥–æ: $0.04-0.11 –∑–∞ –¥–æ–≥–æ–≤–æ—Ä
- **–í—Å—ë –µ—â—ë –≤ 40-150 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ!**

## üóÇÔ∏è –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
1. **`config/settings.py`** - –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
2. **`src/services/llm_gateway.py`** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–∞—Ä–∞–º–µ—Ç—Ä –º–æ–¥–µ–ª–∏, —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ JSON
3. **`src/models/database.py`** - –¢–∞–±–ª–∏—Ü–∞ LLMCache
4. **`src/agents/contract_analyzer_agent.py`** - –ë–∞—Ç—á–∏–Ω–≥ + –º–µ—Ç–æ–¥ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ + –∏–º–ø–æ—Ä—Ç settings + —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç
5. **`app.py`** - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ + –∫–Ω–æ–ø–∫–∞ –∏ UI –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:
6. **`create_cache_table.py`** - –°–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—É LLMCache
7. **`add_deep_analysis.py`** - –î–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ analyze_deep() –≤ –∞–≥–µ–Ω—Ç
8. **`add_deep_analysis_button.py`** - –î–æ–±–∞–≤–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤ UI
9. **`test_quick.py`** - –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
10. **`test_batch_fix.py`** - –¢–µ—Å—Ç –±–∞—Ç—á-–∞–Ω–∞–ª–∏–∑–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
11. **`IMPLEMENTATION_SUMMARY.md`** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (English)
12. **`–û–¢–ß–ï–¢_–†–ï–ê–õ–ò–ó–ê–¶–ò–ò.md`** - –≠—Ç–æ—Ç –æ—Ç—á—ë—Ç (–†—É—Å—Å–∫–∏–π)

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –í–∫–ª—é—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
–í `config/settings.py`:
```python
llm_test_mode = True  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏ –ø—É–Ω–∫—Ç—ã
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ (–£—Ä–æ–≤–µ–Ω—å 1)
```bash
streamlit run app.py
```
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–≥–æ–≤–æ—Ä
- –ù–∞–∂–º–∏—Ç–µ "üîç –ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑"
- –£–≤–∏–¥–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ UI

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ (–£—Ä–æ–≤–µ–Ω—å 2) –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤
- –ü–æ—Å–ª–µ –±–∞–∑–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ "üî¨ –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑"
- –í—ã–±–µ—Ä–∏—Ç–µ 1-3 —Å–∞–º—ã—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É–Ω–∫—Ç–∞
- –ù–∞–∂–º–∏—Ç–µ "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑"
- –ò–∑—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–∞–º–∏

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫—ç—à–∞
```bash
python3 create_cache_table.py
# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ - –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ø–∞–¥—É—Ç –≤ –∫—ç—à ($0 —Å—Ç–æ–∏–º–æ—Å—Ç—å)
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
python3 test_quick.py

# –¢–µ—Å—Ç –±–∞—Ç—á-–∞–Ω–∞–ª–∏–∑–∞
python3 test_batch_fix.py
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: LLM –≤–æ–∑–≤—Ä–∞—â–∞–ª —Ç–µ–∫—Å—Ç –≤–º–µ—Å—Ç–æ JSON
**–û—à–∏–±–∫–∞:**
```
Failed to parse JSON response: Expecting value: line 1 column 1 (char 0)
Raw response: –î–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç...
```

**–ü—Ä–∏—á–∏–Ω–∞:** LLM –æ—Ç–∫–∞–∑—ã–≤–∞–ª—Å—è –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç –∏ –ø—Ä–æ—Å–∏–ª —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–ª—É—á—à–µ–Ω system prompt —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ–º –í–°–ï–ì–î–ê –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å JSON
2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –∏–∑–≤–ª–µ—á—å JSON –∏–∑ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ regex
3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω fallback –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏ –æ—à–∏–±–∫–µ –±–∞—Ç—á–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 2: settings –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
**–û—à–∏–±–∫–∞:**
```
name 'settings' is not defined
```

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `from config.settings import settings` –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ `contract_analyzer_agent.py`

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Streaming –æ—Ç–≤–µ—Ç–æ–≤ (–≤ –æ–∂–∏–¥–∞–Ω–∏–∏)
–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—ã–≤–æ–¥ LLM –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø–æ –º–µ—Ä–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
1. –û–±–Ω–æ–≤–∏—Ç—å LLMGateway –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ streaming —Ä–µ–∂–∏–º–∞
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `st.write_stream()` –≤ Streamlit –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–ª—è –£—Ä–æ–≤–Ω—è 1 –∏ –£—Ä–æ–≤–Ω—è 2 –∞–Ω–∞–ª–∏–∑–∞

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –õ—É—á—à–∏–π UX (–≤–∏–¥–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω–∏—Ç—å –¥–æ–ª–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã
- –û—â—É—â–∞–µ–º–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –±—ã—Å—Ç—Ä–µ–µ

**–ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ** - –±–∞—Ç—á–∏–Ω–≥ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –æ–≥—Ä–æ–º–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ.

## üéâ –ò—Ç–æ–≥–∏

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã:
- ‚úÖ –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞ (gpt-4o-mini + gpt-4o)
- ‚úÖ –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (5 –ø—É–Ω–∫—Ç–æ–≤ –∑–∞ –∑–∞–ø—Ä–æ—Å)
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ LLM –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ UI –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–±–æ—Ä–æ–º
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON

**–û–±—â–µ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏: –≤ 10-600 —Ä–∞–∑ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!**

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–Ω.

---

## üìù –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
- [ ] –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—á—ë—Ç—á–∏–∫ —Ç–æ–∫–µ–Ω–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –í—ã–±–µ—Ä–∏—Ç–µ 2-3 –ø—É–Ω–∫—Ç–∞ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑
- [ ] –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–µ—à–µ–≤–ª–µ)
- [ ] –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞—Ç—á–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏)
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ `llm_test_mode = False` –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
- [ ] –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –Ω–∞ 2-3 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–∞—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –æ–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –∑–∞ –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å

**–û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:**
- –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑: $0.01-0.03 –∑–∞ –¥–æ–≥–æ–≤–æ—Ä
- –° –≥–ª—É–±–æ–∫–∏–º –∞–Ω–∞–ª–∏–∑–æ–º 3 –ø—É–Ω–∫—Ç–æ–≤: $0.04-0.12 –∑–∞ –¥–æ–≥–æ–≤–æ—Ä
- –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞: 10-30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –£—Ä–æ–≤–Ω—è 1, +20-40 —Å–µ–∫—É–Ω–¥ –¥–ª—è –£—Ä–æ–≤–Ω—è 2
