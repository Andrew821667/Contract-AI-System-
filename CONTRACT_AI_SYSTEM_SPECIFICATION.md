# Contract AI System - –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

## –í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞: 1.0
## –î–∞—Ç–∞: 11 –æ–∫—Ç—è–±—Ä—è 2025

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç](#–±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
4. [–ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞](#–º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è-—Å–∏—Å—Ç–µ–º–∞)
5. [–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã](#—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ-–∞–≥–µ–Ω—Ç—ã)
6. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
7. [–°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö](#—Å—Ö–µ–º–∞-–¥–∞–Ω–Ω—ã—Ö)
8. [–°–µ—Ä–≤–∏—Å—ã –∏ —É—Ç–∏–ª–∏—Ç—ã](#—Å–µ—Ä–≤–∏—Å—ã-–∏-—É—Ç–∏–ª–∏—Ç—ã)
9. [–ü–æ—Ç–æ–∫–∏ —Ä–∞–±–æ—Ç—ã](#–ø–æ—Ç–æ–∫–∏-—Ä–∞–±–æ—Ç—ã)
10. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
11. [–ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#–ø–ª–∞–Ω-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
12. [–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ best practices](#–ø–∞—Ç—Ç–µ—Ä–Ω—ã-–∏-best-practices)

---

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### –ù–∞–∑–≤–∞–Ω–∏–µ
**Contract AI System** (AI Legal Assistant for Agribusiness)

### –û–ø–∏—Å–∞–Ω–∏–µ
–ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞ –±–∞–∑–µ LLM –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–¥–µ–ª–∞ –∞–≥—Ä–æ—Ö–æ–ª–¥–∏–Ω–≥–∞. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏: –æ—Ç –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ —à–∞–±–ª–æ–Ω–æ–≤ –¥–æ –∞–Ω–∞–ª–∏–∑–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∏ –∞—É–¥–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∏–ø–æ–≤—ã—Ö —Ñ–æ—Ä–º –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –≤—Ö–æ–¥—è—â–∏—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤ —Å –≤—ã—è–≤–ª–µ–Ω–∏–µ–º —Ä–∏—Å–∫–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π
- ‚úÖ –ê–Ω–∞–ª–∏–∑ tracked changes –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É —á–µ—Ä–µ–∑ RAG
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ–ª–æ–≤–µ–∫–æ–º (human-in-the-loop)
- ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π –≤—ã–≤–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –Æ—Ä–∏—Å—Ç—ã –∞–≥—Ä–æ—Ö–æ–ª–¥–∏–Ω–≥–æ–≤ (CLO, —Å—Ç–∞—Ä—à–∏–µ, —Å—Ä–µ–¥–Ω–∏–µ, –º–ª–∞–¥—à–∏–µ —é—Ä–∏—Å—Ç—ã)
- –†–∞–∑–º–µ—Ä –∫–æ–º–∞–Ω–¥—ã: 3-10 —á–µ–ª–æ–≤–µ–∫
- –û–±—ä—ë–º: 10-50 –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –≤ –Ω–µ–¥–µ–ª—é

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞ MVP
- –°–Ω–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –¥–æ–≥–æ–≤–æ—Ä–æ–º –Ω–∞ 60-80%
- –í—ã—è–≤–ª–µ–Ω–∏–µ 80%+ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Å–∫–æ–≤
- –†–µ–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (10+ –¥–æ–≥–æ–≤–æ—Ä–æ–≤/–Ω–µ–¥–µ–ª—é)
- –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üíº –ë–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç

### –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞–µ–º

#### 1. –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π
- –Æ—Ä–∏—Å—Ç—ã —Ç—Ä–∞—Ç—è—Ç 60-70% –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ä—É—Ç–∏–Ω—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞: 2-4 —á–∞—Å–∞ –≤—Ä—É—á–Ω—É—é
- –ë–æ–ª—å—à–æ–π –æ–±—ä—ë–º —Ç–∏–ø–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### 2. –í—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏ –æ—à–∏–±–æ–∫
- –ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–æ—Ç–µ–Ω –¥–æ–≥–æ–≤–æ—Ä–æ–≤
- –ü—Ä–æ–ø—É—Å–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π ‚Üí —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏
- –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

#### 3. –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç—Ä–∞—Å–ª–µ–≤–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏
- –ê–≥—Ä–æ–±–∏–∑–Ω–µ—Å: –∑–µ–º–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–æ, –í–≠–î, –∫–∞–¥–∞—Å—Ç—Ä, –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ
- –ù–µ—Ç –≥–æ—Ç–æ–≤—ã—Ö —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –¢—Ä–µ–±—É–µ—Ç—Å—è –≥–ª—É–±–æ–∫–∞—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞

#### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ—Å—Ç–∏
- –ó–Ω–∞–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É –ª—é–¥—å–º–∏
- –ù–µ—Ç –µ–¥–∏–Ω–æ–π –±–∞–∑—ã –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–æ–≤
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–ª—é—á–µ–≤—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

### –£–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö AI-–∞–≥–µ–Ω—Ç–æ–≤:**
- –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç —Ä–µ—à–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –∫–ª–∞—Å—Å –∑–∞–¥–∞—á
- –ì–ª—É–±–æ–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å–Ω–æ–π –±–∞–∑–æ–π (RAG)
- –£—á—ë—Ç –æ—Ç—Ä–∞—Å–ª–µ–≤–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ –∞–≥—Ä–æ–±–∏–∑–Ω–µ—Å–∞
- Human-in-the-loop –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π
- –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–∏

### –¢–∏–ø—ã –¥–æ–≥–æ–≤–æ—Ä–æ–≤ (–ø–æ –ì–ö –†–§)

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ –ø–æ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏:

**–ì–ª–∞–≤–∞ 30: –ö—É–ø–ª—è-–ø—Ä–æ–¥–∞–∂–∞**
- –ü–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
- –ü–æ—Å—Ç–∞–≤–∫–∞ –¥–ª—è –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ü–∏—è
- –≠–Ω–µ—Ä–≥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ
- –ü—Ä–æ–¥–∞–∂–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

**–ì–ª–∞–≤–∞ 34: –ê—Ä–µ–Ω–¥–∞**
- –ê—Ä–µ–Ω–¥–∞ –∑–¥–∞–Ω–∏–π/–ø–æ–º–µ—â–µ–Ω–∏–π
- –ê—Ä–µ–Ω–¥–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
- –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞—Ä–µ–Ω–¥–∞ (–ª–∏–∑–∏–Ω–≥)
- –ê—Ä–µ–Ω–¥–∞ –∑–µ–º–ª–∏

**–ì–ª–∞–≤–∞ 37: –ü–æ–¥—Ä—è–¥**
- –ë—ã—Ç–æ–≤–æ–π –ø–æ–¥—Ä—è–¥
- –°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ–¥—Ä—è–¥
- –ü–æ–¥—Ä—è–¥ –Ω–∞ –ù–ò–†
- –ü–æ–¥—Ä—è–¥–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –¥–ª—è –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥

**–ì–ª–∞–≤–∞ 39: –í–æ–∑–º–µ–∑–¥–Ω–æ–µ –æ–∫–∞–∑–∞–Ω–∏–µ —É—Å–ª—É–≥**
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏
- –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏
- –ê—É–¥–∏—Ç–æ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏
- –ü—Ä–æ—á–∏–µ —É—Å–ª—É–≥–∏

**–ì–ª–∞–≤–∞ 47: –•—Ä–∞–Ω–µ–Ω–∏–µ**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ —Å–∫–ª–∞–¥–µ
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –≥–∞—Ä–¥–µ—Ä–æ–±–µ
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ª–æ–º–±–∞—Ä–¥–µ

**–î—Ä—É–≥–∏–µ:**
- –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –∫–æ–Ω—Ü–µ—Å—Å–∏—è (—Ñ—Ä–∞–Ω—á–∞–π–∑–∏–Ω–≥)
- –ê–≥–µ–Ω—Ç—Å–∫–∏–µ –¥–æ–≥–æ–≤–æ—Ä—ã
- –ö–æ–º–∏—Å—Å–∏—è
- –ò –¥—Ä—É–≥–∏–µ –ø–æ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã –ø–æ –ì–ö –†–§

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    USER INTERFACE                        ‚îÇ
‚îÇ         (Streamlit Web App –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              ORCHESTRATOR AGENT                          ‚îÇ
‚îÇ  ‚Ä¢ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∑–∞–¥–∞—á–∏                                 ‚îÇ
‚îÇ  ‚Ä¢ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                ‚îÇ                ‚îÇ               ‚îÇ
        ‚ñº                ‚ñº                ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ONBOARDING  ‚îÇ ‚îÇ  CONTRACT    ‚îÇ ‚îÇ DISAGREEMENT ‚îÇ ‚îÇ  CHANGES   ‚îÇ
‚îÇ    AGENT     ‚îÇ ‚îÇ  GENERATOR   ‚îÇ ‚îÇ  PROCESSOR   ‚îÇ ‚îÇ  ANALYZER  ‚îÇ
‚îÇ              ‚îÇ ‚îÇ    AGENT     ‚îÇ ‚îÇ    AGENT     ‚îÇ ‚îÇ   AGENT    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                ‚îÇ                ‚îÇ                ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                                ‚îÇ
        ‚ñº                                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  CONTRACT    ‚îÇ                  ‚îÇ    QUICK     ‚îÇ
‚îÇ  ANALYZER    ‚îÇ                  ‚îÇ   EXPORT     ‚îÇ
‚îÇ    AGENT     ‚îÇ                  ‚îÇ    AGENT     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   SHARED SERVICES                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ Document Parser (DOCX/PDF ‚Üí XML)                      ‚îÇ
‚îÇ  ‚Ä¢ RAG System (–≤–µ–∫—Ç–æ—Ä–Ω—ã–π + –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫)        ‚îÇ
‚îÇ  ‚Ä¢ Template Manager (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞–º–∏)      ‚îÇ
‚îÇ  ‚Ä¢ LLM Gateway (Claude API / OpenAI API)                ‚îÇ
‚îÇ  ‚Ä¢ Human Review Queue (–æ—á–µ—Ä–µ–¥—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É)             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   DATA LAYER                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ PostgreSQL (–¥–æ–∫—É–º–µ–Ω—Ç—ã, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –∏—Å—Ç–æ—Ä–∏—è)           ‚îÇ
‚îÇ  ‚Ä¢ ChromaDB (–≤–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏)                      ‚îÇ
‚îÇ  ‚Ä¢ File Storage (–æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã, –æ—Ç—á–µ—Ç—ã)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç - –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–¥—É–ª—å
2. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –û–¥–∏–Ω –∞–≥–µ–Ω—Ç = –æ–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
3. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
4. **Human-in-the-loop**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π
5. **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: RAG –≤–µ–∫—Ç–æ—Ä–Ω—ã–π + –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
6. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ**: –û—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –∫ –ø–æ–ª–Ω–æ–º—É

---

## ü§ñ –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

### –¢–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è

**–ê–≥–µ–Ω—Ç** = –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–π:
- –í–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (input)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤ (graph/workflow)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (LLM, RAG, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
- –í—ã–¥–∞—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç (output)
- –ò–º–µ–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ (State)

**–ì—Ä–∞—Ñ (Graph)** = –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞ –≤ LangGraph:
- –ù–∞–±–æ—Ä —É–∑–ª–æ–≤ (nodes) - —Ñ—É–Ω–∫—Ü–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ù–∞–±–æ—Ä —Ä—ë–±–µ—Ä (edges) - —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
- State - –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–µ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏

**–ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (MAS)** = –ù–∞–±–æ—Ä —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ + –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
CONTRACT AI SYSTEM (Multi-Agent System)
‚îÇ
‚îú‚îÄ‚îÄ ORCHESTRATOR AGENT
‚îÇ   ‚îî‚îÄ‚îÄ –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ SPECIALIZED AGENTS
‚îÇ   ‚îú‚îÄ‚îÄ Onboarding Agent (–æ–Ω–±–æ—Ä–¥–∏–Ω–≥ —à–∞–±–ª–æ–Ω–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ Contract Generator Agent (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ Contract Analyzer Agent (–∞–Ω–∞–ª–∏–∑ –¥–æ–≥–æ–≤–æ—Ä–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ Disagreement Processor Agent (–ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ Changes Analyzer Agent (tracked changes)
‚îÇ   ‚îî‚îÄ‚îÄ Quick Export Agent (–±—ã—Å—Ç—Ä—ã–π –≤—ã–≤–æ–¥)
‚îÇ
‚îî‚îÄ‚îÄ SHARED SERVICES
    ‚îú‚îÄ‚îÄ Document Parser
    ‚îú‚îÄ‚îÄ RAG System
    ‚îú‚îÄ‚îÄ Template Manager
    ‚îú‚îÄ‚îÄ LLM Gateway
    ‚îî‚îÄ‚îÄ Review Queue
```

### –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏

```python
# Orchestrator –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á—É —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É
orchestrator_result = orchestrator.run(input_task)
# ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –∑–∞–¥–∞—á–∏
# ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç –Ω—É–∂–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
# ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

# –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
analyzer_result = contract_analyzer.run(contract_xml)
# ‚Üí –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ–π workflow
# ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç shared services
# ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

---

## üì¶ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≥–µ–Ω—Ç—ã

### 1. Orchestrator Agent

**–¶–µ–ª—å**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∑–∞–¥–∞—á–∏ –∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "file_path": str,         # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
    "file_name": str,         # –ò–º—è —Ñ–∞–π–ª–∞
    "task_type": str | None   # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–æ–¥—Å–∫–∞–∑–∫–∞ –æ —Ç–∏–ø–µ –∑–∞–¥–∞—á–∏
}
```

**Workflow (–≥—Ä–∞—Ñ)**:
```
START ‚Üí DETECT_TYPE ‚Üí NORMALIZE ‚Üí ROUTE_TO_AGENT ‚Üí END
```

**–ù–æ–¥—ã**:
1. `detect_type`: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –∑–∞–¥–∞—á–∏
2. `normalize`: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ XML —á–µ—Ä–µ–∑ Document Parser
3. `route_to_agent`: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∫ –Ω—É–∂–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "document_type": str,     # "contract", "disagreement", "tracked_changes"
    "result": dict,           # –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
    "status": str             # "completed", "error"
}
```

---

### 2. Onboarding Agent

**–¶–µ–ª—å**: –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø–æ–≤—ã–µ —Ñ–æ—Ä–º—ã –∫–æ–º–ø–∞–Ω–∏–∏

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
- –ü–µ—Ä–≤–∏—á–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–≥–æ–≤–æ—Ä–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "templates_folder": str,  # –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å —à–∞–±–ª–æ–Ω–∞–º–∏
}
```

**Workflow (–≥—Ä–∞—Ñ)**:
```
START ‚Üí UPLOAD ‚Üí CLASSIFY ‚Üí NORMALIZE ‚Üí EXTRACT_STRUCTURE ‚Üí 
AUDIT ‚Üí CREATE_METADATA ‚Üí VECTORIZE ‚Üí SAVE ‚Üí REPORT ‚Üí END
```

**–ù–æ–¥—ã**:

1. **upload_templates**: –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ –ø–∞–ø–∫–∏
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞: DOCX, PDF
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ state

2. **classify_by_type**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∫–∞–∂–¥–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç LLM –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ –ì–ö –†–§
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: "supply", "service", "construction", "lease", "storage", etc.

3. **normalize_to_xml**: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –µ–¥–∏–Ω—ã–π XML —Ñ–æ—Ä–º–∞—Ç
   - –ß–µ—Ä–µ–∑ Document Parser
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

4. **extract_structure**: –í—ã–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —à–∞–±–ª–æ–Ω–∞
   - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
   - –ö–ª—é—á–µ–≤—ã–µ —É—Å–ª–æ–≤–∏—è
   - –í–∞—Ä–∏–∞—Ç–∏–≤–Ω—ã–µ —á–∞—Å—Ç–∏

5. **compliance_audit**: –ê—É–¥–∏—Ç –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ RAG System
   - –í—ã—è–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤ –≤ —à–∞–±–ª–æ–Ω–µ
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

6. **create_metadata**: –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–∞
   - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
   - –î–æ–ø—É—Å—Ç–∏–º—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π
   - –°–≤—è–∑–∏ —Å –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º

7. **vectorize_clauses**: –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤
   - –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ clauses
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings
   - –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ ChromaDB

8. **save_to_library**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
   - –ó–∞–ø–∏—Å—å –≤ PostgreSQL (table: templates)
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ XML –≤ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
   - –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

9. **generate_report**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞ –ø–æ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥—É
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
   - –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —à–∞–±–ª–æ–Ω—É
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ
   - –≠–∫—Å–ø–æ—Ä—Ç –≤ DOCX

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "templates": List[dict],     # –°–ø–∏—Å–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
    "audit_results": dict,       # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—É–¥–∏—Ç–∞
    "report_path": str,          # –ü—É—Ç—å –∫ –æ—Ç—á—ë—Ç—É
    "status": "completed"
}
```

**State —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```python
class OnboardingState(TypedDict):
    templates_folder: str
    uploaded_files: List[str]
    templates: List[dict]  # [{file, type, xml, metadata, structure}]
    audit_results: dict
    recommendations: List[dict]
    report_path: str
    status: str
```

---

### 3. Contract Generator Agent

**–¶–µ–ª—å**: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –¥–æ–≥–æ–≤–æ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
- –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç –ø—Ä–∏—Å–ª–∞–ª —É—Å–ª–æ–≤–∏—è (email, —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π)
- –ë–∏–∑–Ω–µ—Å –∑–∞–ø—Ä–æ—Å–∏–ª –¥–æ–≥–æ–≤–æ—Ä —Å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –ù—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "contract_type": str,              # "supply", "service", etc.
    "counterparty_conditions": str,    # –¢–µ–∫—Å—Ç —É—Å–ª–æ–≤–∏–π –æ—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
    "additional_params": dict,         # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    "user_requested_review": bool      # –ù—É–∂–Ω–∞ –ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —é—Ä–∏—Å—Ç–æ–º
}
```

**Workflow (–≥—Ä–∞—Ñ)**:
```
START ‚Üí PARSE_CONDITIONS ‚Üí SELECT_TEMPLATE ‚Üí FILL_TEMPLATE ‚Üí 
CUSTOMIZE ‚Üí VALIDATE ‚Üí RISK_CHECK ‚Üí [REVIEW | QUICK_EXPORT] ‚Üí 
EXPORT ‚Üí END
```

**–ù–æ–¥—ã**:

1. **parse_conditions**: –ü–∞—Ä—Å–∏–Ω–≥ —É—Å–ª–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ LLM
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å—Ç–æ—Ä–æ–Ω—ã, —Å—É–º–º—ã, —Å—Ä–æ–∫–∏, –æ—Å–æ–±—ã–µ —É—Å–ª–æ–≤–∏—è

2. **select_template**: –í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–æ —Ç–∏–ø—É –¥–æ–≥–æ–≤–æ—Ä–∞
   - –£—á—ë—Ç –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏

3. **fill_template**: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏
   - –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
   - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ä–æ–∫–æ–≤

4. **customize_clauses**: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –æ—Å–æ–±—ã–µ —É—Å–ª–æ–≤–∏—è
   - –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
   - –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫

5. **validate_draft**: –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∑–Ω–∞—á–µ–Ω–∏–π
   - –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π

6. **risk_check**: –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫–æ–≤
   - –û—Å–Ω–æ–≤–Ω—ã–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏
   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

7. **review_queue** (—É—Å–ª–æ–≤–Ω—ã–π): –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è —é—Ä–∏—Å—Ç–∞
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞

8. **quick_export** (—É—Å–ª–æ–≤–Ω—ã–π): –ë—ã—Å—Ç—Ä—ã–π –≤—ã–≤–æ–¥ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è XML ‚Üí DOCX
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ "–ü–†–û–ï–ö–¢"

9. **export_docx**: –§–∏–Ω–∞–ª—å–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è XML ‚Üí DOCX
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

**Conditional Router**:
```python
def review_decision_router(state):
    if state.get("user_requested_review", False):
        return "review_queue"
    else:
        return "quick_export"
```

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "parsed_conditions": dict,
    "selected_template_id": str,
    "filled_contract_xml": str,
    "risks": List[dict],
    "final_docx_path": str,
    "status": str  # "exported_quick", "awaiting_review", "completed"
}
```

**State —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```python
class ContractGeneratorState(TypedDict):
    contract_type: str
    counterparty_conditions: str
    additional_params: dict
    parsed_conditions: dict
    selected_template_id: str
    template_xml: str
    template_metadata: dict
    filled_contract_xml: str
    validation_errors: List[str]
    risks: List[dict]
    user_requested_review: bool
    review_task_id: str
    final_docx_path: str
    status: str
```

---

### 4. Contract Analyzer Agent

**–¶–µ–ª—å**: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–π –¥–æ–≥–æ–≤–æ—Ä –æ—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
- –ü–æ–ª—É—á–∏–ª–∏ –¥–æ–≥–æ–≤–æ—Ä –æ—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
- –ù—É–∂–Ω–æ –≤—ã—è–≤–∏—Ç—å —Ä–∏—Å–∫–∏ –∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
- –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ: –ø–æ–¥–ø–∏—Å–∞—Ç—å / —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è / –æ—Ç–∫–ª–æ–Ω–∏—Ç—å

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "contract_xml": str,        # XML –¥–æ–≥–æ–≤–æ—Ä–∞ (–ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏)
    "contract_type": str,       # –¢–∏–ø –¥–æ–≥–æ–≤–æ—Ä–∞
}
```

**Workflow (–≥—Ä–∞—Ñ)**:
```
START ‚Üí EXTRACT_ENTITIES ‚Üí CHECK_STANDARDS ‚Üí CHECK_LEGAL ‚Üí 
ANALYZE_RISKS ‚Üí HUMAN_REVIEW ‚Üí GENERATE_REPORT ‚Üí END
```

**–ù–æ–¥—ã**:

1. **extract_entities**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –°—Ç–æ—Ä–æ–Ω—ã –¥–æ–≥–æ–≤–æ—Ä–∞
   - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É—Å–ª–æ–≤–∏—è
   - –°—Ä–æ–∫–∏
   - –û—Å–æ–±—ã–µ —É—Å–ª–æ–≤–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç LLM –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è

2. **check_standards**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
   - –ó–∞–≥—Ä—É–∑–∫–∞ —ç—Ç–∞–ª–æ–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã)
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —É—Å–ª–æ–≤–∏–π
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫ (semantic similarity)
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–ø–∏—Å–æ–∫ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π

3. **check_legal**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ RAG
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π –ø—Ä–∞–≤–∞
   - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
   - –ê–Ω–∞–ª–∏–∑ —Å —É—á—ë—Ç–æ–º —Å—É–¥–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–ø–µ—Ä—Å–¥–∞–Ω–Ω—ã–µ, —Å–∞–Ω–∫—Ü–∏–∏, –ª–∏—Ü–µ–Ω–∑–∏–∏)
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–ø–∏—Å–æ–∫ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ä–∏—Å–∫–æ–≤

4. **analyze_risks**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤
   - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤ (financial, legal, reputational, operational)
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞ (CRITICAL, HIGH, MEDIUM, LOW)
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

5. **human_review**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —é—Ä–∏—Å—Ç–æ–º
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ review_tasks
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —é—Ä–∏—Å—Ç–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ–¥–ª–∞–π–Ω–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞)
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - **–ö–†–ò–¢–ò–ß–ù–û**: Workflow –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –∂–¥—ë—Ç —Ä–µ—à–µ–Ω–∏—è —á–µ–ª–æ–≤–µ–∫–∞

6. **generate_report**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–∞
   - –°–≤–æ–¥–∫–∞ –ø–æ —Ä–∏—Å–∫–∞–º
   - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - –≠–∫—Å–ø–æ—Ä—Ç –≤ DOCX

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "entities": dict,
    "compliance_issues": List[dict],
    "legal_issues": List[dict],
    "risks_by_category": dict,
    "risk_level": str,
    "critical_risks": List[dict],
    "report": dict,
    "report_file": str,
    "status": str  # "awaiting_review", "completed"
}
```

**State —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```python
class ContractAnalysisState(TypedDict):
    document: str
    contract_xml: str
    contract_type: str
    raw_text: str
    sections: dict
    structure: dict
    entities: dict
    compliance_issues: List[dict]
    legal_issues: List[dict]
    risks_by_category: dict
    risk_level: str
    critical_risks: List[dict]
    escalated: bool
    review_task_id: str
    report: dict
    report_file: str
    status: str
```

---

### 5. Disagreement Processor Agent

**–¶–µ–ª—å**: –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π –æ—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
- –ü–æ–ª—É—á–∏–ª–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π –Ω–∞ –Ω–∞—à –¥–æ–≥–æ–≤–æ—Ä
- –ù—É–∂–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç
- –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –∏ –æ—Ç–≤–µ—Ç

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "disagreement_file": str,   # –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
    "our_contract_id": str,     # ID –Ω–∞—à–µ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–æ—Ç–æ–∫–æ–ª
}
```

**Workflow (–≥—Ä–∞—Ñ)**:
```
START ‚Üí PARSE_PROTOCOL ‚Üí LOAD_OUR_TEMPLATE ‚Üí ANALYZE_ITEMS ‚Üí 
RISK_ASSESSMENT ‚Üí GENERATE_RESPONSE ‚Üí HUMAN_REVIEW ‚Üí FINALIZE ‚Üí END
```

**–ù–æ–¥—ã**:

1. **parse_disagreement_protocol**: –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—É–Ω–∫—Ç–æ–≤ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞: –Ω–∞—à–∞ —Ä–µ–¥–∞–∫—Ü–∏—è, —Ä–µ–¥–∞–∫—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞, –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

2. **load_our_template**: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—à–µ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞
   - –ü–æ–ª—É—á–µ–Ω–∏–µ XML –Ω–∞—à–µ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

3. **analyze_each_item**: –ê–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ –¥–æ–≥–æ–≤–æ—Ä–∞
   - –ê–Ω–∞–ª–∏–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é LLM + RAG
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏: accept / reject / negotiate
   - –û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤
   - –í–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–∞

4. **risk_assessment**: –û—Ü–µ–Ω–∫–∞ –æ–±—â–∏—Ö —Ä–∏—Å–∫–æ–≤
   - –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤ –ø–æ –≤—Å–µ–º –ø—É–Ω–∫—Ç–∞–º
   - –û—Ü–µ–Ω–∫–∞ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –±–∞–ª–∞–Ω—Å –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

5. **generate_response_draft**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç–≤–µ—Ç–∞
   - –¢–∞–±–ª–∏—Ü–∞ —Å –æ—Ç–≤–µ—Ç–æ–º –ø–æ –∫–∞–∂–¥–æ–º—É –ø—É–Ω–∫—Ç—É
   - –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ –≤—Å—Ç—Ä–µ—á–µ (–¥–ª—è —Å–ø–æ—Ä–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤)
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç

6. **human_review**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
   - –Æ—Ä–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞
   - –ú–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø–æ –ø—É–Ω–∫—Ç–∞–º
   - –£—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é

7. **finalize_response**: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - –≠–∫—Å–ø–æ—Ä—Ç –≤ DOCX
   - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "disagreement_items": List[dict],
    "analysis_by_position": dict,  # {accept: [...], reject: [...], negotiate: [...]}
    "overall_risks": dict,
    "response_draft": str,
    "response_file": str,
    "status": str
}
```

**State —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```python
class DisagreementState(TypedDict):
    disagreement_file: str
    our_contract_id: str
    our_contract_xml: str
    disagreement_items: List[dict]  # List[DisagreementItem]
    analysis_by_position: dict
    overall_risks: dict
    response_draft: str
    response_file: str
    review_task_id: str
    status: str

class DisagreementItem(TypedDict):
    item_number: str
    original_text: str
    proposed_text: str
    reason: str
    our_position: str  # "accept", "reject", "negotiate"
    recommendation: str
    legal_risks: str
    commercial_risks: str
    compromise_options: List[str]
```

---

### 6. Changes Analyzer Agent

**–¶–µ–ª—å**: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å tracked changes

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
- –ü–æ–ª—É—á–∏–ª–∏ DOCX —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–º–∏ –ø—Ä–∞–≤–∫–∞–º–∏
- –ù—É–∂–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
- –ü—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ –ø–æ –∫–∞–∂–¥–æ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏—é

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "docx_file": str,           # –ü—É—Ç—å –∫ DOCX —Å tracked changes
    "our_template_id": str,     # ID –Ω–∞—à–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
}
```

**Workflow (–≥—Ä–∞—Ñ)**:
```
START ‚Üí EXTRACT_CHANGES ‚Üí LOAD_TEMPLATE ‚Üí CLASSIFY_CHANGES ‚Üí 
ANALYZE_IMPACT ‚Üí GENERATE_RECOMMENDATIONS ‚Üí HUMAN_REVIEW ‚Üí 
FINALIZE ‚Üí END
```

**–ù–æ–¥—ã**:

1. **extract_tracked_changes**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ü–∞—Ä—Å–∏–Ω–≥ DOCX XML
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ insertions (w:ins)
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ deletions (w:del)
   - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: –∞–≤—Ç–æ—Ä, –¥–∞—Ç–∞, —Ç–µ–∫—Å—Ç

2. **load_our_template**: –ó–∞–≥—Ä—É–∑–∫–∞ —ç—Ç–∞–ª–æ–Ω–∞
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—à–µ–≥–æ —à–∞–±–ª–æ–Ω–∞
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

3. **classify_each_change**: –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
     - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ —à–∞–±–ª–æ–Ω–µ
     - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ LLM: critical / high / medium / low
     - –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏

4. **analyze_impact**: –ê–Ω–∞–ª–∏–∑ –≤–ª–∏—è–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
   - –û—Ü–µ–Ω–∫–∞ —Å–æ–≤–æ–∫—É–ø–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
   - –í—ã—è–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

5. **generate_recommendations**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - –ü–æ –∫–∞–∂–¥–æ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏—é: –ø—Ä–∏–Ω—è—Ç—å / –æ—Ç–∫–ª–æ–Ω–∏—Ç—å / –æ–±—Å—É–¥–∏—Ç—å
   - –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç—É
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤

6. **human_review**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —é—Ä–∏—Å—Ç–æ–º
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø–æ –∫–∞–∂–¥–æ–º—É
   - –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

7. **finalize_decision**: –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –Ω–µ–ø—Ä–∏–Ω—è—Ç—ã—Ö
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "changes": List[dict],
    "analysis": dict,  # {critical: [...], high: [...], medium: [...], low: [...]}
    "recommendations": List[dict],
    "final_version": str,
    "status": str
}
```

**State —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```python
class ChangesAnalysisState(TypedDict):
    docx_file: str
    our_template_id: str
    our_template_xml: str
    changes: List[dict]  # List[Change]
    analysis: dict
    recommendations: List[dict]
    final_version: str
    review_task_id: str
    status: str

class Change(TypedDict):
    change_id: str
    change_type: str  # "insert" | "delete"
    author: str
    date: str
    text: str
    paragraph_id: int
    severity: str  # "critical" | "high" | "medium" | "low"
    recommendation: str
    decision: str  # "accept" | "reject" | "discuss"
```

---

### 7. Quick Export Agent

**–¶–µ–ª—å**: –ë—ã—Å—Ç—Ä–æ –≤—ã–≤–µ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç –±–µ–∑ –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–µ—Ä–µ–Ω –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ
- –°—Ä–æ—á–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∫–∏
- –£–∂–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "contract_xml": str,
    "skip_full_review": bool  # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
}
```

**Workflow (–≥—Ä–∞—Ñ)**:
```
START ‚Üí BASIC_VALIDATION ‚Üí CONVERT_TO_DOCX ‚Üí 
ADD_WATERMARK ‚Üí LOG_EXPORT ‚Üí END
```

**–ù–æ–¥—ã**:

1. **basic_validation**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
   - –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
   - –ù–µ—Ç —è–≤–Ω—ã—Ö –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º–∞—Ç–∞

2. **convert_to_docx**: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
   - XML ‚Üí DOCX
   - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

3. **add_watermark** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –í–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ "–ü–†–û–ï–ö–¢" –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

4. **log_export_action**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ö—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª
   - –ö–æ–≥–¥–∞
   - –ë–µ–∑ –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≤–∞–∂–Ω–æ –¥–ª—è –∞—É–¥–∏—Ç–∞)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
```python
{
    "docx_path": str,
    "exported_by": str,
    "exported_at": str,
    "status": "exported_without_review"
}
```

---

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend

```yaml
–Ø–∑—ã–∫: Python 3.11+

–§—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
  - langchain: ^0.1.0          # LLM —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
  - langgraph: ^0.0.40         # –ì—Ä–∞—Ñ—ã –∞–≥–µ–Ω—Ç–æ–≤
  - anthropic: ^0.18.0         # Claude API
  - openai: ^1.0.0             # OpenAI API (backup)
  - pydantic: ^2.5.0           # –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - sqlalchemy: ^2.0.0         # ORM
  - psycopg2-binary: ^2.9.0    # PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
  - chromadb: ^0.4.0           # –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î
  - sentence-transformers: ^2.0.0  # Embeddings

–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
  - python-docx: ^1.1.0        # DOCX
  - PyPDF2: ^3.0.0             # PDF
  - pdfplumber: ^0.10.0        # PDF advanced
  - lxml: ^5.0.0               # XML
  - mammoth: ^1.6.0            # DOCX ‚Üí HTML

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
  - fastapi: ^0.109.0          # REST API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - streamlit: ^1.30.0         # UI
  - redis: ^5.0.0              # –ö—ç—à (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### Frontend

```yaml
Framework: Streamlit 1.30+

–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:
  - plotly: ^5.18.0            # –ì—Ä–∞—Ñ–∏–∫–∏
  - pandas: ^2.1.0             # –¢–∞–±–ª–∏—Ü—ã
```

### –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```yaml
PostgreSQL: 14+
  - –û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î
  - –î–æ–∫—É–º–µ–Ω—Ç—ã, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –∏—Å—Ç–æ—Ä–∏—è
  - –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫

ChromaDB: 0.4+
  - –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î –¥–ª—è RAG
  - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
  - –ö–æ–ª–ª–µ–∫—Ü–∏–∏: legislation, templates, precedents
```

### LLM –º–æ–¥–µ–ª–∏

```yaml
Primary: Claude Sonnet 4 (claude-sonnet-4-20250514)
  - –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
  - –ß–µ—Ä–µ–∑ Anthropic API

Backup: GPT-4 Turbo
  - –ù–∞ —Å–ª—É—á–∞–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Claude
  - –ß–µ—Ä–µ–∑ OpenAI API

Embeddings: paraphrase-multilingual-MiniLM-L12-v2
  - –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è embeddings
  - Sentence Transformers
```

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ MVP

```yaml
–•–æ—Å—Ç–∏–Ω–≥: –õ–æ–∫–∞–ª—å–Ω—ã–π –Ω–æ—É—Ç–±—É–∫ / –ü–ö
  - CPU: 4+ cores
  - RAM: 16+ GB
  - Storage: 256+ GB SSD
  - GPU: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (—É—Å–∫–æ—Ä–∏—Ç embeddings)

–°—Ç–æ–∏–º–æ—Å—Ç—å:
  - –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: 0 —Ä—É–± (–ª–æ–∫–∞–ª—å–Ω–æ)
  - Anthropic API: ~2000-4000 —Ä—É–±/–º–µ—Å—è—Ü
  - –ò–¢–û–ì–û: ~2000-4000 —Ä—É–±/–º–µ—Å—è—Ü
```

---

## üíæ –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

### PostgreSQL Schema

```sql
-- –¢–∞–±–ª–∏—Ü–∞: contracts (–¥–æ–≥–æ–≤–æ—Ä—ã)
CREATE TABLE contracts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    file_name VARCHAR(255) NOT NULL,
    file_path TEXT NOT NULL,
    document_type VARCHAR(50) NOT NULL,  -- "contract", "disagreement", "tracked_changes"
    contract_type VARCHAR(50),           -- "supply", "service", "construction", etc.
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    status VARCHAR(50) DEFAULT 'pending', -- "pending", "analyzing", "reviewing", "completed"
    assigned_to UUID REFERENCES users(id),
    risk_level VARCHAR(20),              -- "CRITICAL", "HIGH", "MEDIUM", "LOW"
    metadata JSONB,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_contracts_status ON contracts(status);
CREATE INDEX idx_contracts_risk_level ON contracts(risk_level);
CREATE INDEX idx_contracts_assigned_to ON contracts(assigned_to);

-- –¢–∞–±–ª–∏—Ü–∞: analysis_results (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞)
CREATE TABLE analysis_results (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    contract_id UUID REFERENCES contracts(id) ON DELETE CASCADE,
    entities JSONB,                      -- –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
    compliance_issues JSONB,             -- –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
    legal_issues JSONB,                  -- –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏
    risks_by_category JSONB,             -- –†–∏—Å–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    recommendations JSONB,               -- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    version INTEGER DEFAULT 1
);

CREATE INDEX idx_analysis_contract_id ON analysis_results(contract_id);

-- –¢–∞–±–ª–∏—Ü–∞: templates (—à–∞–±–ª–æ–Ω—ã –¥–æ–≥–æ–≤–æ—Ä–æ–≤)
CREATE TABLE templates (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    contract_type VARCHAR(50) NOT NULL,  -- "supply", "service", etc.
    xml_content TEXT NOT NULL,
    structure JSONB,                     -- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —à–∞–±–ª–æ–Ω–∞
    metadata JSONB,                      -- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (required_fields, etc.)
    version VARCHAR(20) NOT NULL,
    active BOOLEAN DEFAULT true,
    created_by UUID REFERENCES users(id),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    UNIQUE(contract_type, version)
);

CREATE INDEX idx_templates_type ON templates(contract_type);
CREATE INDEX idx_templates_active ON templates(active);

-- –¢–∞–±–ª–∏—Ü–∞: review_tasks (–∑–∞–¥–∞—á–∏ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É)
CREATE TABLE review_tasks (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    contract_id UUID REFERENCES contracts(id) ON DELETE CASCADE,
    assigned_to UUID REFERENCES users(id),
    status VARCHAR(50) DEFAULT 'pending',  -- "pending", "in_progress", "completed"
    priority VARCHAR(20) DEFAULT 'normal', -- "critical", "high", "normal", "low"
    deadline TIMESTAMP,
    decision VARCHAR(50),                  -- "approve", "reject", "negotiate"
    comments TEXT,
    completed_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_review_tasks_assigned ON review_tasks(assigned_to);
CREATE INDEX idx_review_tasks_status ON review_tasks(status);
CREATE INDEX idx_review_tasks_deadline ON review_tasks(deadline);

-- –¢–∞–±–ª–∏—Ü–∞: legal_documents (–±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è RAG)
CREATE TABLE legal_documents (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    doc_id VARCHAR(64) UNIQUE NOT NULL,  -- Hash –æ—Ç URL
    title TEXT NOT NULL,
    doc_type VARCHAR(50) NOT NULL,       -- "law", "code", "court_decision", etc.
    content TEXT NOT NULL,
    status VARCHAR(20) DEFAULT 'active', -- "active", "inactive"
    is_vectorized BOOLEAN DEFAULT false,
    metadata JSONB,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_legal_docs_type ON legal_documents(doc_type);
CREATE INDEX idx_legal_docs_status ON legal_documents(status);
CREATE INDEX idx_legal_docs_vectorized ON legal_documents(is_vectorized);

-- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –¥–ª—è legal_documents
CREATE INDEX idx_legal_docs_content_fts ON legal_documents 
    USING GIN(to_tsvector('russian', content));

-- –¢–∞–±–ª–∏—Ü–∞: users (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255) NOT NULL,
    role VARCHAR(50) NOT NULL,           -- "admin", "senior_lawyer", "lawyer", "junior_lawyer"
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –¢–∞–±–ª–∏—Ü–∞: export_logs (–ª–æ–≥–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞)
CREATE TABLE export_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    contract_id UUID REFERENCES contracts(id),
    exported_by UUID REFERENCES users(id),
    export_type VARCHAR(50),             -- "full_review", "quick_export"
    exported_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    metadata JSONB
);

CREATE INDEX idx_export_logs_contract ON export_logs(contract_id);
CREATE INDEX idx_export_logs_user ON export_logs(exported_by);
```

### ChromaDB Collections

```python
# Collection: legislation (–∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ)
{
    "name": "legislation",
    "metadata": {
        "description": "–ó–∞–∫–æ–Ω—ã, –∫–æ–¥–µ–∫—Å—ã, –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"
    },
    "embeddings": [vector],
    "documents": [text_chunk],
    "metadatas": [{
        "doc_id": str,
        "title": str,
        "doc_type": str,  # "gk_rf", "zk_rf", etc.
        "section": str,
        "article": str,
        "date": str,
        "status": str  # "active", "inactive"
    }]
}

# Collection: templates (—à–∞–±–ª–æ–Ω—ã –∫–æ–º–ø–∞–Ω–∏–∏)
{
    "name": "company_templates",
    "embeddings": [vector],
    "documents": [clause_text],
    "metadatas": [{
        "template_id": str,
        "contract_type": str,
        "section": str,
        "is_required": bool,
        "version": str
    }]
}

# Collection: precedents (–ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—ã)
{
    "name": "precedents",
    "embeddings": [vector],
    "documents": [case_text],
    "metadatas": [{
        "case_id": str,
        "court": str,
        "date": str,
        "contract_type": str,
        "outcome": str
    }]
}
```

### File Storage Structure

```
/data/
‚îú‚îÄ‚îÄ uploads/              # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ {contract_id}.{ext}
‚îÇ
‚îú‚îÄ‚îÄ normalized/           # XML –≤–µ—Ä—Å–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ {contract_id}.xml
‚îÇ
‚îú‚îÄ‚îÄ reports/              # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ {contract_id}_report_{timestamp}.docx
‚îÇ
‚îú‚îÄ‚îÄ templates/            # –≠—Ç–∞–ª–æ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã (XML)
‚îÇ   ‚îú‚îÄ‚îÄ supply_contract_v1.xml
‚îÇ   ‚îú‚îÄ‚îÄ service_contract_v1.xml
‚îÇ   ‚îî‚îÄ‚îÄ construction_contract_v1.xml
‚îÇ
‚îî‚îÄ‚îÄ exports/              # –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã
    ‚îî‚îÄ‚îÄ {contract_id}_final_{timestamp}.docx
```

---

## üõ†Ô∏è –°–µ—Ä–≤–∏—Å—ã –∏ —É—Ç–∏–ª–∏—Ç—ã

### Document Parser Service

**–¶–µ–ª—å**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ XML

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**:
- DOCX ‚Üí XML
- PDF (text) ‚Üí XML
- PDF (scanned) ‚Üí XML (—á–µ—Ä–µ–∑ OCR)
- XML ‚Üí XML (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ XML –¥–æ–≥–æ–≤–æ—Ä–∞**:

```xml
<contract>
    <metadata>
        <contract_id>uuid</contract_id>
        <contract_type>supply</contract_type>
        <creation_date>2025-10-11</creation_date>
        <version>1.0</version>
    </metadata>
    
    <parties>
        <party role="supplier">
            <name>–û–û–û "–ü–æ—Å—Ç–∞–≤—â–∏–∫"</name>
            <inn>1234567890</inn>
            <address>–ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, 1</address>
            <representative>–ò–≤–∞–Ω–æ–≤ –ò.–ò.</representative>
        </party>
        <party role="buyer">
            <name>–û–û–û "–ü–æ–∫—É–ø–∞—Ç–µ–ª—å"</name>
            <inn>0987654321</inn>
            <address>–¢–∞–º–±–æ–≤, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 10</address>
            <representative>–ü–µ—Ç—Ä–æ–≤ –ü.–ü.</representative>
        </party>
    </parties>
    
    <terms>
        <subject>–ü–æ—Å—Ç–∞–≤–∫–∞ –ø—à–µ–Ω–∏—Ü—ã</subject>
        
        <financial>
            <total_amount>1000000</total_amount>
            <currency>RUB</currency>
            <payment_terms>–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ 30%, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 10 –¥–Ω–µ–π –ø–æ—Å–ª–µ –ø–æ—Å—Ç–∞–≤–∫–∏</payment_terms>
            <payment_schedule>
                <payment date="2025-11-01" amount="300000" />
                <payment date="2025-11-15" amount="700000" />
            </payment_schedule>
        </financial>
        
        <dates>
            <signature_date>2025-10-11</signature_date>
            <start_date>2025-11-01</start_date>
            <end_date>2026-10-31</end_date>
        </dates>
    </terms>
    
    <clauses>
        <clause id="1" type="subject" required="true">
            <title>1. –ü—Ä–µ–¥–º–µ—Ç –¥–æ–≥–æ–≤–æ—Ä–∞</title>
            <content>
                <paragraph>–ü–æ—Å—Ç–∞–≤—â–∏–∫ –æ–±—è–∑—É–µ—Ç—Å—è –ø–æ—Å—Ç–∞–≤–∏—Ç—å...</paragraph>
            </content>
        </clause>
        
        <clause id="2" type="financial" required="true">
            <title>2. –¶–µ–Ω–∞ –∏ –ø–æ—Ä—è–¥–æ–∫ —Ä–∞—Å—á—ë—Ç–æ–≤</title>
            <content>
                <paragraph>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞...</paragraph>
            </content>
        </clause>
        
        <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã -->
    </clauses>
    
    <signatures>
        <signature party="supplier" date="2025-10-11" />
        <signature party="buyer" date="2025-10-11" />
    </signatures>
</contract>
```

**API**:

```python
class DocumentParser:
    def parse(self, file_path: str) -> str:
        """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –≤ XML"""
        
    def convert_docx_to_xml(self, docx_path: str) -> str:
        """DOCX ‚Üí XML"""
        
    def convert_pdf_to_xml(self, pdf_path: str) -> str:
        """PDF ‚Üí XML"""
        
    def extract_tracked_changes(self, docx_path: str) -> List[Change]:
        """–ò–∑–≤–ª–µ–∫–∞–µ—Ç tracked changes –∏–∑ DOCX"""
        
    def normalize_xml(self, xml: str) -> str:
        """–ü—Ä–∏–≤–æ–¥–∏—Ç XML –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É"""
        
    def validate_xml(self, xml: str) -> List[str]:
        """–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç XML –ø–æ —Å—Ö–µ–º–µ"""
```

---

### RAG System Service

**–¶–µ–ª—å**: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:

1. **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** (ChromaDB)
   - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
   - –¢–æ–ø-K —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤

2. **–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** (PostgreSQL)
   - –¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
   - –†–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥

3. **On-demand –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
   - –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ embeddings

**API**:

```python
class RAGSystem:
    def search(
        self, 
        query: str, 
        collection: str = "legislation",
        top_k: int = 5
    ) -> List[dict]:
        """–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫"""
        
    def vector_search(self, query: str, top_k: int) -> List[dict]:
        """–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫"""
        
    def fulltext_search(self, query: str, limit: int) -> List[dict]:
        """–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫"""
        
    def check_template_compliance(
        self,
        xml: str,
        contract_type: str
    ) -> dict:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É"""
        
    def find_relevant_cases(
        self,
        contract_type: str,
        issue: str
    ) -> List[dict]:
        """–ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–æ–≤"""

class RAGIndexer:
    def index_document(self, doc: LegalDocument):
        """–ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç"""
        
    def index_clause(self, text: str, metadata: dict):
        """–ò–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç —Ä–∞–∑–¥–µ–ª –¥–æ–≥–æ–≤–æ—Ä–∞"""
        
    def update_document(self, doc_id: str, new_content: str):
        """–û–±–Ω–æ–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç"""
```

---

### Template Manager Service

**–¶–µ–ª—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞–º–∏ –¥–æ–≥–æ–≤–æ—Ä–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- –ó–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–∏—Å–∫ —à–∞–±–ª–æ–Ω–∞ –ø–æ —Ç–∏–ø—É
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —à–∞–±–ª–æ–Ω–æ–º

**API**:

```python
class TemplateManager:
    def load_template(self, template_id: str) -> dict:
        """–ó–∞–≥—Ä—É–∂–∞–µ—Ç —à–∞–±–ª–æ–Ω"""
        
    def get_template_by_type(
        self, 
        contract_type: str,
        version: str = "latest"
    ) -> dict:
        """–ü–æ–ª—É—á–∞–µ—Ç —à–∞–±–ª–æ–Ω –ø–æ —Ç–∏–ø—É"""
        
    def save_template(
        self,
        name: str,
        contract_type: str,
        xml_content: str,
        metadata: dict
    ) -> str:
        """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω"""
        
    def compare_with_template(
        self,
        contract_xml: str,
        template_id: str
    ) -> dict:
        """–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–æ–≥–æ–≤–æ—Ä —Å —à–∞–±–ª–æ–Ω–æ–º"""
        
    def list_templates(self, contract_type: str = None) -> List[dict]:
        """–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–æ–≤"""
```

---

### LLM Gateway Service

**–¶–µ–ª—å**: –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ LLM —Å retry –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–§—É–Ω–∫—Ü–∏–∏**:
- –í—ã–∑–æ–≤ Claude/GPT
- Retry –ª–æ–≥–∏–∫–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ –∏ –∑–∞—Ç—Ä–∞—Ç

**API**:

```python
class LLMGateway:
    def call(
        self,
        prompt: str,
        model: str = "claude-sonnet-4-20250514",
        response_format: str = "text",  # "text" | "json"
        temperature: float = 0.0,
        max_tokens: int = 4000
    ) -> str | dict:
        """–í—ã–∑–æ–≤ LLM"""
        
    def call_with_retry(
        self,
        prompt: str,
        max_retries: int = 3
    ) -> str | dict:
        """–í—ã–∑–æ–≤ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏"""
        
    def get_cached_response(
        self,
        prompt_hash: str
    ) -> str | dict | None:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –∫—ç—à–∞"""
        
    def count_tokens(self, text: str) -> int:
        """–ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤"""
        
    def get_usage_stats(self) -> dict:
        """–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"""
```

---

### Human Review Queue Service

**–¶–µ–ª—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á –¥–ª—è —é—Ä–∏—Å—Ç–æ–≤

**–§—É–Ω–∫—Ü–∏–∏**:
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —é—Ä–∏—Å—Ç–æ–≤
- –ü—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**API**:

```python
class ReviewQueue:
    def create_task(
        self,
        contract_id: str,
        risk_level: str,
        priority: str = "normal"
    ) -> str:
        """–°–æ–∑–¥–∞—ë—Ç –∑–∞–¥–∞—á—É –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É"""
        
    def assign_task(self, task_id: str, user_id: str):
        """–ù–∞–∑–Ω–∞—á–∞–µ—Ç –∑–∞–¥–∞—á—É —é—Ä–∏—Å—Ç—É"""
        
    def complete_task(
        self,
        task_id: str,
        decision: str,  # "approve" | "reject" | "negotiate"
        comments: str
    ):
        """–ó–∞–≤–µ—Ä—à–∞–µ—Ç –∑–∞–¥–∞—á—É"""
        
    def get_pending_tasks(self, user_id: str = None) -> List[dict]:
        """–°–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–¥–∞—á"""
        
    def get_task_details(self, task_id: str) -> dict:
        """–î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏"""
```

---

## üîÑ –ü–æ—Ç–æ–∫–∏ —Ä–∞–±–æ—Ç—ã (Workflows)

### Workflow 1: –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∫–æ–º–ø–∞–Ω–∏–∏

```
1. –Æ—Ä–∏—Å—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–∞–ø–∫—É —Å —Ç–∏–ø–æ–≤—ã–º–∏ —Ñ–æ—Ä–º–∞–º–∏ (UI)
   ‚Üì
2. Orchestrator –∑–∞–ø—É—Å–∫–∞–µ—Ç Onboarding Agent
   ‚Üì
3. Onboarding Agent:
   - –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –ø–æ —Ç–∏–ø—É –¥–æ–≥–æ–≤–æ—Ä–∞
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ XML
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É
   - –ü—Ä–æ–≤–æ–¥–∏—Ç –∞—É–¥–∏—Ç —á–µ—Ä–µ–∑ RAG
   - –°–æ–∑–¥–∞—ë—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
   - –í–µ–∫—Ç–æ—Ä–∏–∑—É–µ—Ç —Ä–∞–∑–¥–µ–ª—ã
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
   ‚Üì
4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ—Ç—á—ë—Ç –ø–æ –∞—É–¥–∏—Ç—É
   ‚Üì
5. –Æ—Ä–∏—Å—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –æ—Ç—á—ë—Ç –∏ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —Ä–∏—Å–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   ‚Üì
6. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```

### Workflow 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞

```
1. –Æ—Ä–∏—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç —É—Å–ª–æ–≤–∏—è –æ—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ (email/—Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π)
   ‚Üì
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —É—Å–ª–æ–≤–∏—è –≤ —Å–∏—Å—Ç–µ–º—É (UI)
   ‚Üì
3. –í—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø –¥–æ–≥–æ–≤–æ—Ä–∞
   ‚Üì
4. –£–∫–∞–∑—ã–≤–∞–µ—Ç: –Ω—É–∂–Ω–∞ –ª–∏ –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–ª–∏ –±—ã—Å—Ç—Ä—ã–π –≤—ã–≤–æ–¥
   ‚Üì
5. Orchestrator –∑–∞–ø—É—Å–∫–∞–µ—Ç Contract Generator Agent
   ‚Üì
6. Contract Generator Agent:
   - –ü–∞—Ä—Å–∏—Ç —É—Å–ª–æ–≤–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
   - –í—ã–±–∏—Ä–∞–µ—Ç –Ω–∞—à —à–∞–±–ª–æ–Ω
   - –ó–∞–ø–æ–ª–Ω—è–µ—Ç —à–∞–±–ª–æ–Ω –¥–∞–Ω–Ω—ã–º–∏
   - –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –ø–æ–¥ –æ—Å–æ–±—ã–µ —É—Å–ª–æ–≤–∏—è
   - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∏—Å–∫–∏
   ‚Üì
7a. –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
    - –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–¥–∞—á–∞ –≤ Review Queue
    - –Æ—Ä–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ–µ–∫—Ç
    - –£—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏–ª–∏ –≤–Ω–æ—Å–∏—Ç –ø—Ä–∞–≤–∫–∏
    - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è DOCX
    ‚Üì
7b. –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –±—ã—Å—Ç—Ä—ã–π –≤—ã–≤–æ–¥:
    - Quick Export Agent
    - –°—Ä–∞–∑—É —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è DOCX —Å –≤–æ–¥—è–Ω—ã–º –∑–Ω–∞–∫–æ–º "–ü–†–û–ï–ö–¢"
    ‚Üì
8. –Æ—Ä–∏—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–µ–∫—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É
```

### Workflow 3: –ê–Ω–∞–ª–∏–∑ –≤—Ö–æ–¥—è—â–µ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞

```
1. –ü–æ–ª—É—á–µ–Ω –¥–æ–≥–æ–≤–æ—Ä –æ—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ (email/—Ñ–∞–π–ª)
   ‚Üì
2. –Æ—Ä–∏—Å—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ —Å–∏—Å—Ç–µ–º—É (UI)
   ‚Üì
3. Orchestrator –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø: –≤—Ö–æ–¥—è—â–∏–π –¥–æ–≥–æ–≤–æ—Ä
   ‚Üì
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç Contract Analyzer Agent
   ‚Üì
5. Contract Analyzer Agent:
   - –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤ XML
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏ (—Å—Ç–æ—Ä–æ–Ω—ã, —Å—É–º–º—ã, —Å—Ä–æ–∫–∏)
   - –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –Ω–∞—à–∏–º —à–∞–±–ª–æ–Ω–æ–º (check_standards)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É —á–µ—Ä–µ–∑ RAG (check_legal)
   - –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ä–∏—Å–∫–∏
   ‚Üì
6. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–¥–∞—á–∞ –≤ Review Queue
   ‚Üì
7. –Æ—Ä–∏—Å—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   ‚Üì
8. –Æ—Ä–∏—Å—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ UI:
   - –í–∏–¥–∏—Ç AI-–∞–Ω–∞–ª–∏–∑
   - –°–ø–∏—Å–æ–∫ —Ä–∏—Å–∫–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä
   ‚Üì
9. –Æ—Ä–∏—Å—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ:
   - –ü–æ–¥–ø–∏—Å–∞—Ç—å (approve)
   - –û—Ç–∫–ª–æ–Ω–∏—Ç—å (reject)
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π (negotiate)
   ‚Üì
10. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç
    ‚Üì
11. –î–µ–π—Å—Ç–≤–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ—à–µ–Ω–∏—è:
    - Approve ‚Üí –≥–æ—Ç–æ–≤–∏–º –∫ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—é
    - Reject ‚Üí –ø–∏—Å—å–º–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É
    - Negotiate ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ Workflow 4
```

### Workflow 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π

```
1. –ü–æ–ª—É—á–µ–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π –æ—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
   ‚Üì
2. –Æ—Ä–∏—Å—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ —Å–∏—Å—Ç–µ–º—É
   ‚Üì
3. Orchestrator –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø: –ø—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π
   ‚Üì
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç Disagreement Processor Agent
   ‚Üì
5. Disagreement Processor Agent:
   - –ü–∞—Ä—Å–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø—É–Ω–∫—Ç—ã —Ä–∞–∑–Ω–æ–≥–ª–∞—Å–∏–π
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—à –¥–æ–≥–æ–≤–æ—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç:
     * –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—é (–ø—Ä–∏–Ω—è—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å/–æ–±—Å—É–¥–∏—Ç—å)
     * –û—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–∏—Å–∫–∏
     * –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞
   ‚Üì
6. –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–¥–∞—á–∞ –≤ Review Queue
   ‚Üì
7. –Æ—Ä–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - AI-–∞–Ω–∞–ª–∏–∑ –ø–æ –∫–∞–∂–¥–æ–º—É –ø—É–Ω–∫—Ç—É
   - –ü—Ä–æ–µ–∫—Ç –æ—Ç–≤–µ—Ç–∞
   - –ú–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
   ‚Üì
8. –£—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é –æ—Ç–≤–µ—Ç–∞
   ‚Üì
9. –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç–≤–µ—Ç–∞ –≤ DOCX
   ‚Üì
10. –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É
```

### Workflow 5: –ê–Ω–∞–ª–∏–∑ tracked changes

```
1. –ü–æ–ª—É—á–µ–Ω DOCX —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–º–∏ –ø—Ä–∞–≤–∫–∞–º–∏
   ‚Üì
2. –Æ—Ä–∏—Å—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ —Å–∏—Å—Ç–µ–º—É
   ‚Üì
3. Orchestrator –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç: tracked changes
   ‚Üì
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç Changes Analyzer Agent
   ‚Üì
5. Changes Analyzer Agent:
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (insertions + deletions)
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—à —à–∞–±–ª–æ–Ω
   - –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–≤–æ–∫—É–ø–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   ‚Üì
6. –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–¥–∞—á–∞ –≤ Review Queue
   ‚Üì
7. –Æ—Ä–∏—Å—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç:
   - –¢–∞–±–ª–∏—Ü—É –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å—é
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É
   - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
   ‚Üì
8. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –ø–æ –∫–∞–∂–¥–æ–º—É –∏–∑–º–µ–Ω–µ–Ω–∏—é:
   - Accept (–ø—Ä–∏–Ω—è—Ç—å)
   - Reject (–æ—Ç–∫–ª–æ–Ω–∏—Ç—å)
   - Discuss (–æ–±—Å—É–¥–∏—Ç—å —Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–º)
   ‚Üì
9. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
   ‚Üì
10. –≠–∫—Å–ø–æ—Ä—Ç
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
contract-analyzer-mvp/
‚îÇ
‚îú‚îÄ‚îÄ README.md                           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt                    # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example                        # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore
‚îÇ
‚îú‚îÄ‚îÄ app.py                              # Streamlit UI (–≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª)
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ settings.py                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ë–î, API –∫–ª—é—á–∏)
‚îÇ   ‚îî‚îÄ‚îÄ prompts.py                      # LLM –ø—Ä–æ–º–ø—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ orchestrator/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_graph.py               # Orchestrator Agent –≥—Ä–∞—Ñ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ state.py                    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ OrchestratorState
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ onboarding_agent.py         # Onboarding Agent
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contract_generator_agent.py # Contract Generator Agent
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contract_analyzer_agent.py  # Contract Analyzer Agent
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ disagreement_agent.py       # Disagreement Processor Agent
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ changes_analyzer_agent.py   # Changes Analyzer Agent
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ quick_export_agent.py       # Quick Export Agent
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document_parser.py          # Document Parser Service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rag_system.py               # RAG System Service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ template_manager.py         # Template Manager Service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm_gateway.py              # LLM Gateway Service
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ review_queue.py             # Human Review Queue Service
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py                 # SQLAlchemy models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories.py             # Database repositories
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py                  # Pydantic schemas
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ xml_utils.py                # XML —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ docx_utils.py               # DOCX —É—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ helpers.py                  # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ uploads/                        # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ normalized/                     # XML –≤–µ—Ä—Å–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ reports/                        # –û—Ç—á–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ templates/                      # –≠—Ç–∞–ª–æ–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã (XML)
‚îÇ   ‚îî‚îÄ‚îÄ exports/                        # –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ init.sql                        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ migrations/                     # –ú–∏–≥—Ä–∞—Ü–∏–∏ (Alembic)
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_parser.py
‚îÇ   ‚îú‚îÄ‚îÄ test_rag.py
‚îÇ   ‚îú‚îÄ‚îÄ test_agents.py
‚îÇ   ‚îî‚îÄ‚îÄ fixtures/                       # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ architecture.md                 # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
    ‚îú‚îÄ‚îÄ api.md                          # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ deployment.md                   # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
```

---

## üöÄ –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP (4 –Ω–µ–¥–µ–ª–∏)

### –ù–µ–¥–µ–ª—è 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç

**–î–µ–Ω—å 1-2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL + ChromaDB
- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î (init.sql)

**–î–µ–Ω—å 3-4: Document Parser**
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `document_parser.py`
- DOCX ‚Üí XML –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
- PDF ‚Üí XML –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ tracked changes
- Unit —Ç–µ—Å—Ç—ã

**–î–µ–Ω—å 5-7: Template Manager**
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `template_manager.py`
- –ó–∞–≥—Ä—É–∑–∫–∞ —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö —Ñ–æ—Ä–º
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ 2-3 —Ä–µ–∞–ª—å–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ –∫–æ–º–ø–∞–Ω–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞

### –ù–µ–¥–µ–ª—è 2: –ü–µ—Ä–≤—ã–π –∞–≥–µ–Ω—Ç

**–î–µ–Ω—å 8-9: Contract Analyzer Agent (—Å–∫–µ–ª–µ—Ç)**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ContractAnalysisState
- –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ —Å 3 –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –Ω–æ–¥–∞–º–∏
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è LLM Gateway
- –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LangGraph

**–î–µ–Ω—å 10-11: Entity Extraction + Standards Check**
- –ù–æ–¥–∞: extract_entities
- –ù–æ–¥–∞: check_standards (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —à–∞–±–ª–æ–Ω–æ–º)
- –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM
- –¢–µ—Å—Ç—ã –Ω–∞ 5 —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–∞—Ö

**–î–µ–Ω—å 12-14: Human Review + UI**
- –ù–æ–¥–∞: human_review
- –¢–∞–±–ª–∏—Ü–∞ review_tasks –≤ –ë–î
- –ë–∞–∑–æ–≤—ã–π UI –≤ Streamlit:
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞
  - –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ —Å UI

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞–±–æ—Ç–∞—é—â–∏–π Contract Analyzer Agent + UI

### –ù–µ–¥–µ–ª—è 3: RAG + –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤

**–î–µ–Ω—å 15-16: RAG System (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π)**
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `rag_system.py`
- –ü–∞—Ä—Å–∏–Ω–≥ 500 —Å—Ç–∞—Ç–µ–π –ì–ö –†–§ (–æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º)
- –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Sentence Transformers
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ ChromaDB
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞

**–î–µ–Ω—å 17-18: Legal Compliance Node**
- –ù–æ–¥–∞: check_legal
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è RAG System
- –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å —É—á—ë—Ç–æ–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- –¢–µ—Å—Ç—ã

**–î–µ–Ω—å 19-21: Risk Analysis + Report Generation**
- –ù–æ–¥–∞: analyze_risks
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è DOCX –æ—Ç—á—ë—Ç–∞
- –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞ Contract Analyzer Agent

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª–Ω—ã–π –≥—Ä–∞—Ñ Contract Analyzer Agent —Å RAG

### –ù–µ–¥–µ–ª—è 4: –ü–æ–ª–∏—Ä–æ–≤–∫–∞ + –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–µ–Ω—å 22-23: UI –¥–æ—Ä–∞–±–æ—Ç–∫–∞**
- –£–ª—É—á—à–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- –î–∞—à–±–æ—Ä–¥ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á

**–î–µ–Ω—å 24-26: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
- –ü—Ä–æ–≥–æ–Ω 20 –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –∏–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏
- –°–±–æ—Ä feedback –æ—Ç –∫–æ–ª–ª–µ–≥-—é—Ä–∏—Å—Ç–æ–≤
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –±–∞–≥–æ–≤
- –î–æ—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤

**–î–µ–Ω—å 27-28: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è + –î–µ–ø–ª–æ–π**
- README.md
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
- –ó–∞–ø—É—Å–∫ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞–±–æ—Ç–∞—é—â–∏–π MVP, –≥–æ—Ç–æ–≤—ã–π –∫ –ø–∏–ª–æ—Ç–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üìê –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ Best Practices

### 1. LangGraph –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ State

```python
from typing import TypedDict, List
from langgraph.graph import StateGraph, END

class MyAgentState(TypedDict):
    # –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    input_field: str
    
    # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    processed_data: dict
    
    # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
    output: dict
    status: str
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞

```python
def build_agent_graph():
    # –°–æ–∑–¥–∞—ë–º –≥—Ä–∞—Ñ
    workflow = StateGraph(MyAgentState)
    
    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–¥—ã (—Ñ—É–Ω–∫—Ü–∏–∏)
    workflow.add_node("step1", step1_function)
    workflow.add_node("step2", step2_function)
    workflow.add_node("step3", step3_function)
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Ä—ë–±—Ä–∞)
    workflow.set_entry_point("step1")
    workflow.add_edge("step1", "step2")
    workflow.add_edge("step2", "step3")
    workflow.add_edge("step3", END)
    
    # –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º
    return workflow.compile()
```

#### –£—Å–ª–æ–≤–Ω–æ–µ –≤–µ—Ç–≤–ª–µ–Ω–∏–µ

```python
def router_function(state):
    """–§—É–Ω–∫—Ü–∏—è-—Ä–æ—É—Ç–µ—Ä –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ –≤–µ—Ç–≤–ª–µ–Ω–∏—è"""
    if state["some_condition"]:
        return "path_a"
    else:
        return "path_b"

# –í –≥—Ä–∞—Ñ–µ
workflow.add_conditional_edges(
    "decision_node",
    router_function,
    {
        "path_a": "node_a",
        "path_b": "node_b"
    }
)
```

### 2. LLM –≤—ã–∑–æ–≤—ã

#### –ë–∞–∑–æ–≤—ã–π –≤—ã–∑–æ–≤

```python
def llm_call(prompt: str, response_format: str = "text") -> str | dict:
    """
    –í—ã–∑–æ–≤ LLM —á–µ—Ä–µ–∑ LLM Gateway
    """
    from src.services.llm_gateway import LLMGateway
    
    gateway = LLMGateway()
    response = gateway.call(
        prompt=prompt,
        model="claude-sonnet-4-20250514",
        response_format=response_format,
        temperature=0.0
    )
    
    return response
```

#### –ü—Ä–æ–º–ø—Ç –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è JSON

```python
prompt = f"""
–ò–∑–≤–ª–µ–∫–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

{text}

–í–µ—Ä–Ω–∏ JSON –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
{{
    "field1": "value",
    "field2": 123,
    "field3": ["item1", "item2"]
}}

–í–ê–ñ–ù–û: –û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û –≤–∞–ª–∏–¥–Ω—ã–º JSON, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.
"""

response = llm_call(prompt, response_format="json")
data = json.loads(response)
```

### 3. RAG –ø–æ–∏—Å–∫

```python
def search_legislation(query: str) -> List[dict]:
    """
    –ü–æ–∏—Å–∫ –≤ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å–Ω–æ–π –±–∞–∑–µ
    """
    from src.services.rag_system import RAGSystem
    
    rag = RAGSystem()
    
    # –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
    results = rag.vector_search(
        query=query,
        collection="legislation",
        top_k=5
    )
    
    # –ï—Å–ª–∏ –º–∞–ª–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ - –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π
    if len(results) < 3:
        fulltext_results = rag.fulltext_search(query, limit=5)
        results.extend(fulltext_results)
    
    return results
```

### 4. –†–∞–±–æ—Ç–∞ —Å –ë–î

#### Repository –ø–∞—Ç—Ç–µ—Ä–Ω

```python
class ContractRepository:
    def __init__(self):
        self.db = get_database_session()
    
    def create(self, contract_data: dict) -> str:
        """–°–æ–∑–¥–∞—ë—Ç –¥–æ–≥–æ–≤–æ—Ä"""
        contract = Contract(**contract_data)
        self.db.add(contract)
        self.db.commit()
        return str(contract.id)
    
    def get_by_id(self, contract_id: str) -> Contract:
        """–ü–æ–ª—É—á–∞–µ—Ç –¥–æ–≥–æ–≤–æ—Ä –ø–æ ID"""
        return self.db.query(Contract).filter_by(id=contract_id).first()
    
    def update_status(self, contract_id: str, status: str):
        """–û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å"""
        self.db.query(Contract).filter_by(id=contract_id).update({"status": status})
        self.db.commit()
```

### 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
def safe_llm_call(prompt: str, max_retries: int = 3):
    """
    LLM –≤—ã–∑–æ–≤ —Å retry –ª–æ–≥–∏–∫–æ–π
    """
    from tenacity import retry, stop_after_attempt, wait_exponential
    
    @retry(
        stop=stop_after_attempt(max_retries),
        wait=wait_exponential(multiplier=1, min=2, max=10)
    )
    def _call():
        return llm_call(prompt)
    
    try:
        return _call()
    except Exception as e:
        logger.error(f"LLM call failed after {max_retries} retries: {e}")
        raise
```

### 6. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

logger = logging.getLogger(__name__)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
def my_function():
    logger.info("Starting function")
    try:
        # –∫–æ–¥
        logger.debug("Debug info")
    except Exception as e:
        logger.error(f"Error occurred: {e}", exc_info=True)
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Variables (.env)

```bash
# Database
DATABASE_URL=postgresql://user:password@localhost:5432/contract_ai

# LLM API Keys
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-...

# ChromaDB
CHROMA_PERSIST_DIRECTORY=./chroma_data

# File Storage
UPLOAD_DIR=./data/uploads
NORMALIZED_DIR=./data/normalized
REPORTS_DIR=./data/reports
TEMPLATES_DIR=./data/templates
EXPORTS_DIR=./data/exports

# Application
APP_ENV=development  # development | production
LOG_LEVEL=INFO

# UI
STREAMLIT_SERVER_PORT=8501
```

### settings.py

```python
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    # Database
    database_url: str
    
    # LLM
    anthropic_api_key: str
    openai_api_key: str
    
    # ChromaDB
    chroma_persist_directory: str
    
    # Storage
    upload_dir: str
    normalized_dir: str
    reports_dir: str
    templates_dir: str
    exports_dir: str
    
    # App
    app_env: str = "development"
    log_level: str = "INFO"
    
    class Config:
        env_file = ".env"

settings = Settings()
```

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ MVP

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

1. **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**
   - –ë—ã–ª–æ: 2-4 —á–∞—Å–∞ –Ω–∞ –¥–æ–≥–æ–≤–æ—Ä (–≤—Ä—É—á–Ω—É—é)
   - –°—Ç–∞–ª–æ: 5-10 –º–∏–Ω—É—Ç (AI) + 30 –º–∏–Ω—É—Ç (–ø—Ä–æ–≤–µ—Ä–∫–∞ —é—Ä–∏—Å—Ç–æ–º)
   - –¶–µ–ª—å: 60-80% —ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏

2. **–¢–æ—á–Ω–æ—Å—Ç—å –≤—ã—è–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–æ–≤**
   - AI –Ω–∞—Ö–æ–¥–∏—Ç: 80%+ —Ä–∏—Å–∫–æ–≤
   - –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è: <20%

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**
   - –ú–∏–Ω–∏–º—É–º 10 –¥–æ–≥–æ–≤–æ—Ä–æ–≤/–Ω–µ–¥–µ–ª—é
   - –ú–∏–Ω–∏–º—É–º 3 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

1. –Æ—Ä–∏—Å—Ç—ã —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–∏—Å—Ç–µ–º—É (–Ω–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç)
2. –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π feedback
3. –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
4. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–º –æ—Ç–¥–µ–ª–∞–º

### –ö—Ä–∏—Ç–µ—Ä–∏–π –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç—É

–ï—Å–ª–∏ —á–µ—Ä–µ–∑ 2 –º–µ—Å—è—Ü–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ 80+ –¥–æ–≥–æ–≤–æ—Ä–æ–≤
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ >50%
- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- ‚úÖ –Æ—Ä–∏—Å—Ç—ã –¥–æ–≤–æ–ª—å–Ω—ã

‚Üí –ú–û–ñ–ù–û —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –≤ –ø—Ä–æ–¥—É–∫—Ç –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –í–∞–∂–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **Human-in-the-loop –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** - –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —á–µ–ª–æ–≤–µ–∫–æ–º –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π

2. **XML –∫–∞–∫ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** - –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π XML –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

3. **–ì–∏–±—Ä–∏–¥–Ω—ã–π RAG** - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –∏ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏

4. **On-demand –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –Ω–µ –Ω—É–∂–Ω–æ –≤–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å –≤—Å—é –±–∞–∑—É —Å—Ä–∞–∑—É

5. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤** - –≤—Å–µ–≥–¥–∞ —Ö—Ä–∞–Ω–∏–º –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —à–∞–±–ª–æ–Ω–æ–≤

6. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π** - –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è quick export –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

7. **–†–∞–±–æ—Ç–∞ –Ω–∞ –Ω–æ—É—Ç–±—É–∫–µ** - –≤—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è MVP

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP

- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏ (–Ω–µ —Å –¥—Ä—É–≥–∏–º–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏)
- –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π: –ì–ö –†–§ + –ó–ö –†–§ (–æ—Å–Ω–æ–≤–Ω–æ–µ)
- 3-5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞ 3 –º–µ—Å—è—Ü–∞
- –û–¥–∏–Ω —è–∑—ã–∫: —Ä—É—Å—Å–∫–∏–π

### –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è v2.0 (–ø–æ—Å–ª–µ MVP)

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∏—Å–µ–º –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç–æ–º
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã –¥–ª—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
- –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ –æ—Ç—Ä–∞—Å–ª–∏

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [LangChain](https://python.langchain.com/)
- [LangGraph](https://langchain-ai.github.io/langgraph/)
- [Anthropic Claude API](https://docs.anthropic.com/)
- [ChromaDB](https://docs.trychroma.com/)
- [Streamlit](https://docs.streamlit.io/)

### –ó–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ

- [–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–ü–ª—é—Å](http://www.consultant.ru/)
- [–ì–∞—Ä–∞–Ω—Ç](https://www.garant.ru/)
- [–ì–ê–° "–ü—Ä–∞–≤–æ—Å—É–¥–∏–µ"](https://sudrf.ru/)

---

**–ö–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞. –í–µ—Ä—Å–∏—è 1.0 –æ—Ç 11 –æ–∫—Ç—è–±—Ä—è 2025**
